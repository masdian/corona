size = 5,
fill = col_pal, color = col_pal) +
coord_flip() +
theme_void() +
scale_y_continuous(limits = c(0, data_range[2])) +
theme(legend.position = "none")
}
bar_yields <- yield_data %>%
bar_yields <- yield_data %>%
filter(
year %in% c(2013:2017),
crop == "potatoes",
Country %in% c(
country_sel, "Germany", "Brazil", "Ireland", "Lebanon",
"Italy", "Netherlands", "France", "Denmark", "El Salvador", "Denmark")
) %>%
nest(yields = c(year, yield)) %>%
mutate(plot = map(yields, plot_bar))
install.packages("paletteer")
plot_bar <- function(data) {
data_range <- yield_data %>%
filter(
year %in% c(2013:2017),
crop == "potatoes",
Country %in% c(
country_sel, "Germany", "Brazil", "Ireland", "Lebanon", "Italy", "Netherlands", "France", "Denmark", "El Salvador", "Denmark"
)
) %>%
pull(yield) %>%
range()
yield_mean <- data %>%
summarize(yield = mean(yield))
col_pal <- scales::col_numeric(as.character(paletteer::paletteer_d("ggsci::blue_material", n = 9)), domain = data_range)(pull(yield_mean, yield))
yield_mean %>%
ggplot() +
geom_col(aes(x = 1, y = yield),
size = 5,
fill = col_pal, color = col_pal) +
coord_flip() +
theme_void() +
scale_y_continuous(limits = c(0, data_range[2])) +
theme(legend.position = "none")
}
bar_yields <- yield_data %>%
filter(
year %in% c(2013:2017),
crop == "potatoes",
Country %in% c(
country_sel, "Germany", "Brazil", "Ireland", "Lebanon",
"Italy", "Netherlands", "France", "Denmark", "El Salvador", "Denmark")
) %>%
nest(yields = c(year, yield)) %>%
mutate(plot = map(yields, plot_bar))
bar_yields
table_data %>%
select(-crop) %>%
rowwise() %>%
mutate(
mean = mean(`2013`:`2017`),
ggplot = NA
) %>%
gt() %>%
text_transform(
locations = cells_body(vars(ggplot)),
fn = function(x) {
map(bar_yields$plot, ggplot_image, height = px(15), aspect_ration = 4)
}
) %>%
cols_width(vars(ggplot) ~ px(100)) %>%
cols_label(
mean = "2013-2017",
ggplot = ""
) %>%
fmt_number(2:4) %>%
tab_spanner(
label = "Potato Yield in Tonnes/Hectare",
columns = c(2, 3)
) %>%
tab_spanner(
label = "Average",
columns = 4
) %>%
tab_style(
style = cell_text(color = "black", weight = "bold"),
locations = list(
cells_column_spanner(everything()),
cells_column_labels(everything())
)
) %>%
tab_options(
row_group.border.top.width = px(3),
row_group.border.top.color = "black",
row_group.border.bottom.color = "black",
table_body.hlines.color = "white",
table.border.top.color = "white",
table.border.top.width = px(3),
table.border.bottom.color = "white",
table.border.bottom.width = px(3),
table_body.border.bottom.width = px(2),
table_body.border.bottom.color = "black",
column_labels.border.bottom.color = "black",
column_labels.border.bottom.width = px(3)
) %>%
tab_source_note("Table: @thomasmock | Data: OurWorldInData.org")
table_data %>%
select(-crop) %>%
rowwise() %>%
mutate(
mean = mean(`2013`:`2017`),
ggplot = NA
) %>%
gt() %>%
text_transform(
locations = cells_body(vars(ggplot)),
fn = function(x) {
map(bar_yields$plot, ggplot_image, height = px(15), aspect_ration = 4)
}
) %>%
cols_width(vars(ggplot) ~ px(100)) %>%
cols_label(
mean = "2013-2017",
ggplot = ""
) %>%
fmt_number(2:4) %>%
tab_spanner(
label = "Potato Yield in Tonnes/Hectare",
columns = c(2, 3)
) %>%
tab_spanner(
label = "Average",
columns = 4
) %>%
tab_style(
style = cell_text(color = "black", weight = "bold"),
locations = list(
cells_column_spanners(everything()),
cells_column_labels(everything())
)
) %>%
tab_options(
row_group.border.top.width = px(3),
row_group.border.top.color = "black",
row_group.border.bottom.color = "black",
table_body.hlines.color = "white",
table.border.top.color = "white",
table.border.top.width = px(3),
table.border.bottom.color = "white",
table.border.bottom.width = px(3),
table_body.border.bottom.width = px(2),
table_body.border.bottom.color = "black",
column_labels.border.bottom.color = "black",
column_labels.border.bottom.width = px(3)
) %>%
tab_source_note("Table: @thomasmock | Data: OurWorldInData.org")
table_data %>%
select(-crop) %>%
rowwise() %>%
mutate(
mean = mean(`2013`:`2017`),
ggplot = NA
) %>%
gt() %>%
text_transform(
locations = cells_body(vars(ggplot)),
fn = function(x) {
map(bar_yields$plot, ggplot_image, height = px(15), aspect_ration = 4)
}
) %>%
cols_width(vars(ggplot) ~ px(100)) %>%
cols_label(
mean = "2013-2017",
ggplot = ""
) %>%
fmt_number(2:4) %>%
tab_spanner(
label = "Potato Yield in Tonnes/Hectare",
columns = c(2, 3)
) %>%
tab_spanner(
label = "Average",
columns = 4
) %>%
tab_style(
style = cell_text(color = "black", weight = "bold"),
locations = list(
cells_column_spanners(everything()),
cells_column_labels(everything())
)
) %>%
tab_options(
row_group.border.top.width = px(3),
row_group.border.top.color = "black",
row_group.border.bottom.color = "black",
table_body.hlines.color = "white",
table.border.top.color = "white",
table.border.top.width = px(3),
table.border.bottom.color = "white",
table.border.bottom.width = px(3),
table_body.border.bottom.width = px(2),
table_body.border.bottom.color = "black",
column_labels.border.bottom.color = "black",
column_labels.border.bottom.width = px(3)
) %>%
tab_source_note("Table: @thomasmock | Data: OurWorldInData.org")
table_data %>%
select(-crop) %>%
rowwise() %>%
mutate(
mean = mean(`2013`:`2017`),
ggplot = NA
) %>%
gt() %>%
text_transform(
locations = cells_body(vars(ggplot)),
fn = function(x) {
map(bar_yields$plot, ggplot_image, height = px(15), aspect_ratio = 4)
}
) %>%
cols_width(vars(ggplot) ~ px(100)) %>%
cols_label(
mean = "2013-2017",
ggplot = ""
) %>%
fmt_number(2:4) %>%
tab_spanner(
label = "Potato Yield in Tonnes/Hectare",
columns = c(2, 3)
) %>%
tab_spanner(
label = "Average",
columns = 4
) %>%
tab_style(
style = cell_text(color = "black", weight = "bold"),
locations = list(
cells_column_spanners(everything()),
cells_column_labels(everything())
)
) %>%
tab_options(
row_group.border.top.width = px(3),
row_group.border.top.color = "black",
row_group.border.bottom.color = "black",
table_body.hlines.color = "white",
table.border.top.color = "white",
table.border.top.width = px(3),
table.border.bottom.color = "white",
table.border.bottom.width = px(3),
table_body.border.bottom.width = px(2),
table_body.border.bottom.color = "black",
column_labels.border.bottom.color = "black",
column_labels.border.bottom.width = px(3)
) %>%
tab_source_note("Table: @thomasmock | Data: OurWorldInData.org")
plot_bar(c(2, 3, 4, 5))
library(tidyverse)
library(readxl)
db <- read_excel("G:/My Drive/#PMB/2020/Dashboard/maba20_4web.xlsx")
data <- db %>%
group_by(jalur) %>%
summarize(lolos = n(),
regis = sum(registrasi == "registrasi", na.rm = T),
nim = sum(nim == "diterima", na.rm = T))
data
db %>% filter(jalur == `5_ALIH JENJANG`)
db %>% filter(jalur == "5_ALIH JENJANG")
View(db %>% filter(jalur == "5_ALIH JENJANG"))
data
db <- read_excel("G:/My Drive/#PMB/2020/Dashboard/maba20_4web.xlsx")
data <- db %>%
group_by(jalur) %>%
summarize(lolos = n(),
regis = sum(registrasi == "registrasi", na.rm = T),
nim = sum(nim == "diterima", na.rm = T))
data
sum(data$nim)
db <- read_excel("G:/My Drive/#PMB/2020/Dashboard/maba20_4web.xlsx")
data <- db %>%
group_by(jalur) %>%
summarize(lolos = n(),
regis = sum(registrasi == "registrasi", na.rm = T),
nim = sum(nim == "diterima", na.rm = T))
data
data <- db %>%
filter(nim == "diterima") %>%
group_by(jk, fakultas) %>%
summarize(total = n()) %>%
pivot_wider(names_from = jk, values_from = total)
names(data) <- c("Fakultas", "Laki-Laki", "Perempuan")
data
data <- db %>%
filter(nim == "diterima") %>%
group_by(jk, fakultas) %>%
summarize(total = n()) %>%
pivot_wider(names_from = jk, values_from = total)
names(data) <- c("Fakultas", "Laki-Laki", "Perempuan")
data$Fakultas <- c("Hukum", "FKIP", "Teknik", "Pertanian", "FEB", "FISIP", "Pascasarjana","Kedokteran")
### agar sesuai urutan dibuat faktor dengan level yang berurutan
data$Fakultas <- factor(data$Fakultas, levels = data[["Fakultas"]])
plot_ly(data, x = ~Fakultas, y = ~`Laki-Laki`, type = 'bar', name = "Laki-Laki") %>%
add_trace(y = ~Perempuan, name = "Perempuan") %>%
layout(yaxis = list(title = ' '), barmode = 'group')
library(plotly)
library(shiny)
plot_ly(data, x = ~Fakultas, y = ~`Laki-Laki`, type = 'bar', name = "Laki-Laki") %>%
add_trace(y = ~Perempuan, name = "Perempuan") %>%
layout(yaxis = list(title = ' '), barmode = 'group')
library(janitor)
library(kableExtra)
data <- adorn_totals(data, where = c("row", "col"), name = "JML")
kable(data) %>%
kable_styling(bootstrap_options = "striped", full_width = F,
latex_options = "scale_down") %>%
add_header_above(c(" " = 1, "Jenis Kelamin" = 2, " " = 1))
data <- db %>%
filter(nim == "diterima" & jalur != "7_Pascasarjana") %>%
group_by(negeri) %>%
summarize(banyak = n())
data
div(plot_ly(type = "pie", labels = data$negeri, values = data$banyak,
textinfo = "label+percent",
insidetextorientation = "radial"), align = "center")
data <- db %>%
filter(nim == "diterima" & jalur != "7_Pascasarjana") %>%
group_by(jns_sklh) %>%
summarize(banyak = n())
div(plot_ly(type = "pie", labels = data$jns_sklh, values = data$banyak,
textinfo = "label+percent",
insidetextorientation = "radial"), align = "center")
data <- db %>%
filter(nim == "diterima" & jalur != "7_Pascasarjana") %>%
group_by(provinsi, jk) %>%
summarize(tot = n())
data <- data %>%
pivot_wider(names_from = jk, values_from = tot)
data[is.na(data)] <- 0
data <- adorn_totals(data, where = "col", name = "JML")
data <- arrange(data, desc(JML))
data <- adorn_totals(data, where = "row", name = "JML")
names(data) <- c("Provinsi", "Perempuan", "Laki-Laki", "JML")
kable(data) %>%
kable_styling(bootstrap_options = "striped", full_width = F,
latex_options = "scale_down") %>%
add_header_above(c(" " = 1, "Jenis Kelamin" = 2, " " = 1))
data <- db %>%
filter(nim == "diterima" & jalur != "7_Pascasarjana") %>%
group_by(pend_ortu, jk) %>%
summarize(tot = n())
data <- data %>%
pivot_wider(names_from = jk, values_from = tot)
data[is.na(data)] <- 0
names(data) <- c("Pendidikan", "Laki-Laki", "Perempuan")
data$Pendidikan <- c("Tidak Ada Data", "Tidak Sekolah", "Tidak Tamat SD", "SD", "SLTP", "SLTA", "D1", "D2", "D3", "D4", "S1", "S2", "S3")
data <- adorn_totals(data, where = c("col", "row"), name = "JML")
kable(data) %>%
kable_styling(bootstrap_options = "striped", full_width = F,
latex_options = "scale_down") %>%
add_header_above(c(" " = 1, "Jenis Kelamin" = 2, " " = 1))
warnings()
data <- db %>%
group_by(fakultas, prodi) %>%
summarize(lulus = n(),
sudah = sum(na.omit(registrasi == "registrasi")),
belum = lulus - sudah,
diterima = sum(na.omit(nim == "diterima")))
data
data <- data %>%
group_by(fakultas) %>%
summarize(lulus = sum(lulus),
sudah = sum(sudah),
belum = sum(belum),
diterima = sum(diterima))
data
data$fakultas <- c("Hukum", "FKIP", "Teknik", "Pertanian",
"FEB", "FISIP", "Pascasarjana","Kedokteran")
data$fakultas  <- factor(data$fakultas, levels = data[["fakultas"]])
plot_ly(data, x = ~fakultas, y = ~lulus, type = "bar", name = "Total") %>%
add_trace(y = ~sudah, name = "registrasi berkas") %>%
add_trace(y = ~diterima, name = "bayar UKT") %>%
layout(
title = "",
yaxis = list(title = ""),
xaxis = list(title = "Fakultas"),
hovermode = "compare"
)
data <- adorn_totals(data, where = "row", name = "Total")
data$pers_sudah <- round(data$sudah / data$lulus * 100, 0)
data$pers_belum <- round(data$belum / data$lulus * 100, 0)
data <- data[,c(1:4,6:7,5)]
names(data) <- c("Fakultas", "Lolos Seleksi", "Ya", "Tidak", "Ya (%)", "Tidak (%)", "Bayar UKT")
kable(data) %>%
kable_styling(bootstrap_options = "striped", full_width = F,
latex_options = "scale_down") %>%
add_header_above(c(" " = 2, "Registrasi Berkas" = 4," " = 1))
data <- db %>%
group_by(fakultas, prodi) %>%
summarize(lulus = n(),
sudah = sum(na.omit(registrasi == "registrasi")),
belum = lulus - sudah,
diterima = sum(na.omit(nim == "diterima")))
data <- data[, -1]
data <- adorn_totals(data,where = "row", name = "Total")
data$pers_sudah <- round(data$sudah / data$lulus * 100, 0)
data$pers_belum <- round(data$belum / data$lulus * 100, 0)
data <- data[,c(1:4,6, 7, 5)]
names(data) <- c("Fakultas/Program Studi", "Lolos Seleksi", "Ya", "Tidak", "Ya (%)", "Tidak (%)", "Bayar UKT")
View(data)
kable(data, row.names = F) %>%
kable_styling(bootstrap_options = "striped", full_width = F,
latex_options = "scale_down") %>%
add_header_above(c(" " = 2, "Registrasi" = 4, " " = 1)) %>%
pack_rows("Hukum", 1, 1, label_row_css = "background-color: #666; color: #fff;") %>%
pack_rows("Keguruan dan Ilmu Pendidikan", 2, 19, label_row_css = "background-color: #666; color: #fff;") %>%
pack_rows("Teknik", 20, 25, label_row_css = "background-color: #666; color: #fff;") %>%
pack_rows("Pertanian", 26, 29, label_row_css = "background-color: #666; color: #fff;") %>%
pack_rows("Ekonomi dan Bisnis", 30, 37, label_row_css = "background-color: #666; color: #fff;") %>%
pack_rows("Ilmu Sosial dan Ilmu Politik", 38, 40, label_row_css = "background-color: #666; color: #fff;") %>%
pack_rows("Pascasarjana", 41, 52, label_row_css = "background-color: #666; color: #fff;") %>%
pack_rows("Kedokteran", 53, 57, label_row_css = "background-color: #666; color: #fff;")
db <- read_excel("G:/My Drive/#PMB/2020/Dashboard/maba20_4web.xlsx")
data <- db %>%
group_by(jalur) %>%
summarize(lolos = n(),
regis = sum(registrasi == "registrasi", na.rm = T),
nim = sum(nim == "diterima", na.rm = T))
data
library(googlesheets4)
gs4_deauth()
## 01 Keringanan
data <- NULL
keringanan <- "https://docs.google.com/spreadsheets/d/1LGW6-zgG8rZoDog5KEXwqoE3IFK2aD2O_MW_gJ2JdCQ/edit?usp=sharing"
keringanan
data1 <- data.frame(read_sheet(keringanan))
data1
names(data1)
data1[,c(2, 4)]
names(data1)
dim(data1)
unique(data1$Email.address)
sum(unique(data1$Email.address))
length(unique(data1$Email.address))
dim(data1)
names(data1)
data1 <- data1[,c(1,2,4,5)]
names(data1)
names(data1) <- c("timestamp", "email", "nama", "no_ktp")
data1 <- unique(data1)
data <- rbind(data, data1)
sbm_kip <- "https://docs.google.com/spreadsheets/d/1BQkSjjr5MqXxkzTEM6Rbpwn0wYLX177xeYdzrMepeD0/edit?usp=sharing"
data1 <- data.frame(read_sheet(sbm_kip))
data1 <- data1[,c(1,2,4,5)]
names(data1) <- c("timestamp", "email", "nama", "no_ktp")
data1 <- unique(data1)
data <- rbind(data, data1)
dim(data)
smm <- "https://docs.google.com/spreadsheets/d/1xF0vL_xCOOyK8zrUWQUQcQy_jncBUiZPLfaa8aYKOAU/edit?usp=sharing"
data1 <- data.frame(read_sheet(smm))
data1 <- data1[,c(1,2,4,5)]
names(data1) <- c("timestamp", "email", "nama", "no_ktp")
data1 <- unique(data1)
data <- rbind(data, data1)
dim(data)
## 04 umm
umm <- 'https://docs.google.com/spreadsheets/d/1PetxRxMiQJ1NI4P_OxJDxCu_ZmXs_1MN6Y-0bQhMKpU/edit?usp=sharing'
data1 <- data.frame(read_sheet(umm))
data1 <- data1[,c(1,2,4,5)]
names(data1) <- c("timestamp", "email", "nama", "no_ktp")
data1 <- unique(data1)
data <- rbind(data, data1)
head(data)
dim(data)
names(data)
data <- NULL
sbm_reg <- "https://docs.google.com/spreadsheets/d/1LGW6-zgG8rZoDog5KEXwqoE3IFK2aD2O_MW_gJ2JdCQ/edit?usp=sharing"
data1 <- data.frame(read_sheet(sbm_reg))
data1 <- data1[,c(1,2,4,5)]
names(data1) <- c("waktu_daftar", "email", "nama", "no_ktp")
data1 <- unique(data1)
data <- rbind(data, data1)
## 02 sbmptn kip
sbm_kip <- "https://docs.google.com/spreadsheets/d/1BQkSjjr5MqXxkzTEM6Rbpwn0wYLX177xeYdzrMepeD0/edit?usp=sharing"
data1 <- data.frame(read_sheet(sbm_kip))
data1 <- data1[,c(1,2,4,5)]
names(data1) <- c("waktu_daftar", "email", "nama", "no_ktp")
data1 <- unique(data1)
data <- rbind(data, data1)
## 03 smmptn
smm <- "https://docs.google.com/spreadsheets/d/1xF0vL_xCOOyK8zrUWQUQcQy_jncBUiZPLfaa8aYKOAU/edit?usp=sharing"
data1 <- data.frame(read_sheet(smm))
data1 <- data1[,c(1,2,4,5)]
names(data1) <- c("waktu_daftar", "email", "nama", "no_ktp")
data1 <- unique(data1)
data <- rbind(data, data1)
## 04 umm
umm <- 'https://docs.google.com/spreadsheets/d/1PetxRxMiQJ1NI4P_OxJDxCu_ZmXs_1MN6Y-0bQhMKpU/edit?usp=sharing'
data1 <- data.frame(read_sheet(umm))
data1 <- data1[,c(1,2,4,5)]
names(data1) <- c("waktu_daftar", "email", "nama", "no_ktp")
data1 <- unique(data1)
data <- rbind(data, data1)
head(data)
names(data) <- c("Waktu Pendaftaran", "Email", "Nama", "Program Studi")
DT::datatable(data,
rownames = F)#,
names(data) <- c("Waktu Pendaftaran", "Email", "Nama", "No KTP")
DT::datatable(data,
rownames = F)#,
data <- data[,c(1, 2)]
names(data) <- c("Waktu Pendaftaran", "Email")
DT::datatable(data,
rownames = F)#,
setwd("~/Github Publish/Corona")
